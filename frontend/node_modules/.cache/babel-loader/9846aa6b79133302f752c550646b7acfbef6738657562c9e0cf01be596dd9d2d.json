{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ptrej\\\\tienda_repuestos\\\\frontend\\\\src\\\\components\\\\Carrito.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useCart } from '../context/CartContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Carrito() {\n  _s();\n  const {\n    cart,\n    removeFromCart,\n    updateQuantity,\n    total,\n    clearCart\n  } = useCart();\n  const [loadingPago, setLoadingPago] = useState(false);\n  const iniciarPago = async () => {\n    if (cart.length === 0) {\n      alert(\"El carrito está vacío\");\n      return;\n    }\n    setLoadingPago(true);\n    try {\n      const response = await fetch('http://localhost:8000/api/iniciar_pago/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          total: total.toFixed(2)\n        })\n      });\n      const data = await response.json();\n      if (response.ok && data.url && data.token) {\n        // Redirigimos a Webpay para el pago\n        window.location.href = data.url;\n      } else {\n        alert(data.error || 'Error iniciando el pago');\n      }\n    } catch (error) {\n      alert('Error de red o servidor');\n      console.error(error);\n    }\n    setLoadingPago(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        textAlign: 'center'\n      },\n      children: \"Carrito de Compras\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), cart.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Tu carrito est\\xE1 vac\\xEDo.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [cart.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          borderBottom: '1px solid #ccc',\n          marginBottom: '10px',\n          paddingBottom: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: item.nombre\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.descripcion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: item.cantidad,\n          onChange: e => updateQuantity(item.id, e.target.value),\n          min: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Precio unitario: $\", item.precio]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Subtotal: $\", (item.precio * item.cantidad).toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => removeFromCart(item.id),\n          children: \"Eliminar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Total: $\", total.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: clearCart,\n        style: {\n          backgroundColor: 'red',\n          color: 'white',\n          marginRight: 10\n        },\n        children: \"Vaciar Carrito\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: iniciarPago,\n        disabled: loadingPago,\n        style: {\n          backgroundColor: '#009ee3',\n          color: 'white',\n          padding: '10px 20px',\n          fontSize: '16px'\n        },\n        children: loadingPago ? 'Redirigiendo a Webpay...' : 'Pagar con Webpay'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(Carrito, \"2atw0E9EVhXrBBquDhi7pH0z88s=\", false, function () {\n  return [useCart];\n});\n_c = Carrito;\nexport default Carrito;\nvar _c;\n$RefreshReg$(_c, \"Carrito\");","map":{"version":3,"names":["React","useState","useCart","jsxDEV","_jsxDEV","Fragment","_Fragment","Carrito","_s","cart","removeFromCart","updateQuantity","total","clearCart","loadingPago","setLoadingPago","iniciarPago","length","alert","response","fetch","method","headers","body","JSON","stringify","toFixed","data","json","ok","url","token","window","location","href","error","console","style","padding","children","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","map","item","borderBottom","marginBottom","paddingBottom","nombre","descripcion","type","value","cantidad","onChange","e","id","target","min","precio","onClick","backgroundColor","color","marginRight","disabled","fontSize","_c","$RefreshReg$"],"sources":["C:/Users/ptrej/tienda_repuestos/frontend/src/components/Carrito.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useCart } from '../context/CartContext';\r\n\r\nfunction Carrito() {\r\n  const { cart, removeFromCart, updateQuantity, total, clearCart } = useCart();\r\n  const [loadingPago, setLoadingPago] = useState(false);\r\n\r\n  const iniciarPago = async () => {\r\n    if (cart.length === 0) {\r\n      alert(\"El carrito está vacío\");\r\n      return;\r\n    }\r\n\r\n    setLoadingPago(true);\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:8000/api/iniciar_pago/', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ total: total.toFixed(2) }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok && data.url && data.token) {\r\n        // Redirigimos a Webpay para el pago\r\n        window.location.href = data.url;\r\n      } else {\r\n        alert(data.error || 'Error iniciando el pago');\r\n      }\r\n    } catch (error) {\r\n      alert('Error de red o servidor');\r\n      console.error(error);\r\n    }\r\n\r\n    setLoadingPago(false);\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      <h1 style={{ textAlign: 'center' }}>Carrito de Compras</h1>\r\n      {cart.length === 0 ? (\r\n        <p>Tu carrito está vacío.</p>\r\n      ) : (\r\n        <>\r\n          {cart.map(item => (\r\n            <div key={item.id} style={{ borderBottom: '1px solid #ccc', marginBottom: '10px', paddingBottom: '10px' }}>\r\n              <h3>{item.nombre}</h3>\r\n              <p>{item.descripcion}</p>\r\n              <input\r\n                type=\"number\"\r\n                value={item.cantidad}\r\n                onChange={(e) => updateQuantity(item.id, e.target.value)}\r\n                min=\"1\"\r\n              />\r\n              <p>Precio unitario: ${item.precio}</p>\r\n              <p>Subtotal: ${(item.precio * item.cantidad).toFixed(2)}</p>\r\n              <button onClick={() => removeFromCart(item.id)}>Eliminar</button>\r\n            </div>\r\n          ))}\r\n          <h2>Total: ${total.toFixed(2)}</h2>\r\n          <button onClick={clearCart} style={{ backgroundColor: 'red', color: 'white', marginRight: 10 }}>\r\n            Vaciar Carrito\r\n          </button>\r\n\r\n          <button\r\n            onClick={iniciarPago}\r\n            disabled={loadingPago}\r\n            style={{ backgroundColor: '#009ee3', color: 'white', padding: '10px 20px', fontSize: '16px' }}\r\n          >\r\n            {loadingPago ? 'Redirigiendo a Webpay...' : 'Pagar con Webpay'}\r\n          </button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Carrito;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}