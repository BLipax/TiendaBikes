{"ast":null,"code":"import React,{useEffect}from'react';import{useCart}from'../context/CartContext';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PagoExitoso(){const{cart,clearCart}=useCart();const navigate=useNavigate();useEffect(()=>{const actualizarStockBackend=async items=>{try{const response=await fetch('https://tiendabikes-1.onrender.com/api/productos/actualizar_stock/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({items})});const data=await response.json();if(!response.ok){alert('Error al actualizar stock: '+data.error);}}catch(error){alert('Error de red al actualizar stock');}};if(cart.length>0){actualizarStockBackend(cart);clearCart();alert('Pago exitoso! Stock actualizado.');// Redirige luego de 1.5 segundos para que el usuario vea el mensaje\nsetTimeout(()=>{navigate('/catalogo');},1500);}else{// Si por alguna razón el carrito está vacío, igual redirige\nnavigate('/catalogo');}},[cart,clearCart,navigate]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gracias por tu compra!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Procesando actualizaci\\xF3n del stock...\"})]});}export default PagoExitoso;","map":{"version":3,"names":["React","useEffect","useCart","useNavigate","jsx","_jsx","jsxs","_jsxs","PagoExitoso","cart","clearCart","navigate","actualizarStockBackend","items","response","fetch","method","headers","body","JSON","stringify","data","json","ok","alert","error","length","setTimeout","style","padding","textAlign","children"],"sources":["C:/Users/ptrej/tienda_repuestos/frontend/src/components/PagoExitoso.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useCart } from '../context/CartContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction PagoExitoso() {\r\n  const { cart, clearCart } = useCart();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const actualizarStockBackend = async (items) => {\r\n      try {\r\n        const response = await fetch('https://tiendabikes-1.onrender.com/api/productos/actualizar_stock/', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ items }),\r\n        });\r\n        const data = await response.json();\r\n        if (!response.ok) {\r\n          alert('Error al actualizar stock: ' + data.error);\r\n        }\r\n      } catch (error) {\r\n        alert('Error de red al actualizar stock');\r\n      }\r\n    };\r\n\r\n    if (cart.length > 0) {\r\n      actualizarStockBackend(cart);\r\n      clearCart();\r\n      alert('Pago exitoso! Stock actualizado.');\r\n      // Redirige luego de 1.5 segundos para que el usuario vea el mensaje\r\n      setTimeout(() => {\r\n        navigate('/catalogo');\r\n      }, 1500);\r\n    } else {\r\n      // Si por alguna razón el carrito está vacío, igual redirige\r\n      navigate('/catalogo');\r\n    }\r\n  }, [cart, clearCart, navigate]);\r\n\r\n  return (\r\n    <div style={{ padding: 20, textAlign: 'center' }}>\r\n      <h2>Gracias por tu compra!</h2>\r\n      <p>Procesando actualización del stock...</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PagoExitoso;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,OAAO,KAAQ,wBAAwB,CAChD,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,QAAS,CAAAC,WAAWA,CAAA,CAAG,CACrB,KAAM,CAAEC,IAAI,CAAEC,SAAU,CAAC,CAAGR,OAAO,CAAC,CAAC,CACrC,KAAM,CAAAS,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAW,sBAAsB,CAAG,KAAO,CAAAC,KAAK,EAAK,CAC9C,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,oEAAoE,CAAE,CACjGC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEP,KAAM,CAAC,CAChC,CAAC,CAAC,CACF,KAAM,CAAAQ,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClC,GAAI,CAACR,QAAQ,CAACS,EAAE,CAAE,CAChBC,KAAK,CAAC,6BAA6B,CAAGH,IAAI,CAACI,KAAK,CAAC,CACnD,CACF,CAAE,MAAOA,KAAK,CAAE,CACdD,KAAK,CAAC,kCAAkC,CAAC,CAC3C,CACF,CAAC,CAED,GAAIf,IAAI,CAACiB,MAAM,CAAG,CAAC,CAAE,CACnBd,sBAAsB,CAACH,IAAI,CAAC,CAC5BC,SAAS,CAAC,CAAC,CACXc,KAAK,CAAC,kCAAkC,CAAC,CACzC;AACAG,UAAU,CAAC,IAAM,CACfhB,QAAQ,CAAC,WAAW,CAAC,CACvB,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,IAAM,CACL;AACAA,QAAQ,CAAC,WAAW,CAAC,CACvB,CACF,CAAC,CAAE,CAACF,IAAI,CAAEC,SAAS,CAAEC,QAAQ,CAAC,CAAC,CAE/B,mBACEJ,KAAA,QAAKqB,KAAK,CAAE,CAAEC,OAAO,CAAE,EAAE,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAC,QAAA,eAC/C1B,IAAA,OAAA0B,QAAA,CAAI,wBAAsB,CAAI,CAAC,cAC/B1B,IAAA,MAAA0B,QAAA,CAAG,0CAAqC,CAAG,CAAC,EACzC,CAAC,CAEV,CAEA,cAAe,CAAAvB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}